VERSION = 0.1
#CC = gcc
#LD = gcc

CC = clang
LD = clang

CFLAGS  = -g -O2 -Wall -DHAVE_CONFIG -DREALTIME_SCHEDULING -DVERSION=\"$(VERSION)\" -D_REENTRANT

LDFLAGS =  -ldl -lpthread -lm -lncurses\
		   /usr/local/lib/cmus/ip/mad.so\
		   /usr/local/lib/cmus/op/pulse.so\
		   #/usr/local/lib/cmus/op/roar.so\
		   #/usr/local/lib/cmus/op/ao.so

main.o server.o: CFLAGS += -DDEFAULT_PORT=3000

SRC = $(wildcard *.c)
obj = $(filter-out server.o, $(SRC:.c=.o))

all: learn

include lib.mk

learn: $(obj)
	$(call cmd,ld,$(LDFLAGS))

# remove files generated by make
clean: $(obj)
	rm -f $(obj)

# remove files generated by make and configure
distclean: clean learn
	rm -f $^

.PHONY: all realclean clean
